# Сервис для генерации речи

## О проекте:

Учебный проект по проектированию сервисов на основе ai/ml моделей. В данном проекте реализуется полный цикл работы с
моделями для генерации аудиозаписей

## Предварительные условия


Требуется Python 3.10 или выше. Рекомендуется использовать виртуальную среду, чтобы избежать конфликтов зависимостей.

При стандартной установке Python вы можете создать и активировать виртуальную среду с помощью следующих команд:

```bash
python -m venv .venv
source .venv/bin/activate
```

### Планируемое развитие

* Реализация полного цикла сервисов генерации аудиозаписей.
* Оптимизация процесса списания токенов при генерации новых аудиозаписей.
* Организация авторизации и аутентификации пользователей.


### Запуск тестов
```bash 
python -c "from tests import test_user_creation_and_balance_operations; test_user_creation_and_balance_operations()"
```

## Streamlit UI

Простой веб-интерфейс на Streamlit добавлен в директорию `streamlit_app/`. Он поддерживает регистрацию, вход, пополнение баланса и генерацию аудио.

### Запуск

1. Убедитесь, что backend FastAPI запущен локально на `http://localhost:8080`.
2. Установите зависимости UI (желательно в отдельной виртуальной среде):

```bash
pip install -r streamlit_app/requirements.txt
```

3. Запустите приложение Streamlit:

```bash
streamlit run streamlit_app/app.py
```

4. В интерфейсе можно изменить адрес backend в боковой панели (по умолчанию `http://localhost:8080`).

### Возможности UI
- Регистрация: POST `/register`
- Вход: POST `/login` (OAuth2 form: `username`, `password`)
- Профиль: GET `/me`
- Пополнение: GET `/credit?amount=...`
- Генерация: POST `/predict?text=...` + проверка статуса и скачивание `/predictions/{id}/audio`